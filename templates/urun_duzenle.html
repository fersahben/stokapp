{% extends "base.html" %}

{% block title %}Ürün Düzenle{% endblock %}

{% block extra_css %}
<style>
    .preview-image {
        max-width: 200px;
        max-height: 200px;
        object-fit: cover;
        margin-top: 1rem;
        border-radius: 8px;
    }
    
    .current-image {
        max-width: 200px;
        max-height: 200px;
        object-fit: cover;
        margin-bottom: 1rem;
        border-radius: 8px;
    }
    
    /* Mobil cihazlar için özel stiller */
    @media (max-width: 768px) {
        .card {
            border-radius: 8px;
            margin: 0.5rem;
        }
        
        .card-body {
            padding: 1rem;
        }
        
        .form-label {
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }
        
        .form-control {
            font-size: 1rem;
            padding: 0.4rem 0.6rem;
        }
        
        .btn {
            width: 100%;
            margin-bottom: 0.5rem;
        }
        
        .text-muted {
            font-size: 0.8rem;
        }
        
        .preview-image,
        .current-image {
            max-width: 150px;
            max-height: 150px;
        }
    }
    
    /* Tablet cihazlar için özel stiller */
    @media (min-width: 769px) and (max-width: 991px) {
        .card {
            margin: 1rem;
        }
        
        .btn {
            padding: 0.4rem 0.8rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title mb-0">Ürün Düzenle</h3>
            </div>
            <div class="card-body">
                <form method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="barkod" class="form-label">Barkod</label>
                        <input type="text" class="form-control" id="barkod" name="barkod" pattern="\d*" minlength="12" maxlength="12" value="{{ urun.barkod }}" required>
                        <small class="text-muted">12 haneli barkod numarası</small>
                    </div>

                    <div class="mb-3">
                        <label for="ad" class="form-label">Ürün Adı</label>
                        <input type="text" class="form-control" id="ad" name="ad" value="{{ urun.ad }}" required>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="miktar" class="form-label">Miktar</label>
                            <input type="number" class="form-control" id="miktar" name="miktar" value="{{ urun.miktar }}" required min="0">
                        </div>
                        <div class="col-md-6">
                            <label for="fiyat" class="form-label">Fiyat (TL)</label>
                            <input type="number" class="form-control" id="fiyat" name="fiyat" value="{{ urun.fiyat }}" required min="0" step="0.01">
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="resim" class="form-label">Ürün Fotoğrafı</label>
                        {% if urun.resim_url %}
                        <div class="text-center">
                            <img src="{{ url_for('static', filename=urun.resim_url) }}" alt="{{ urun.ad }}" class="current-image">
                        </div>
                        {% endif %}
                        <input type="file" class="form-control" id="resim" name="resim" accept="image/*">
                        <small class="text-muted">Yeni bir fotoğraf yüklerseniz mevcut fotoğraf silinecektir.</small>
                        <div id="resim-onizleme" class="text-center"></div>
                    </div>

                    <div class="text-end">
                        <a href="{{ url_for('urun_listesi') }}" class="btn btn-secondary me-2">
                            <i class="fas fa-times me-1"></i>İptal
                        </a>
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save me-1"></i>Kaydet
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Resim önizleme
    document.getElementById('resim').addEventListener('change', function(e) {
        const file = e.target.files[0];
        const preview = document.getElementById('resim-onizleme');
        
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.innerHTML = `<img src="${e.target.result}" class="preview-image">`;
            }
            reader.readAsDataURL(file);
        } else {
            preview.innerHTML = '';
        }
    });
</script>
{% endblock %} 